<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script type="text/javascript">
		// User storage
		var users = [
		{
			id: 0,
			firstName: 'Dmitry',
			lastName: 'Kozlov',
			birthDay: '16.07.1990',
			phones: [
					'89001234567',
					'89001234567'
			]
		},
		{
			id: 1,
			firstName: 'Ivan',
			lastName: 'Petrov',
			birthDay: '08.06.1956',
			phones: [
					'89001234567',
					'83431234567'
			]
		}
		];

		function addUser(users){
			var user = {};
			var max_id = 0;
			for(id in users){
				if(users[id]>max_id){
					max_id = users[id];	
				} 
			}
			user.id = max_id++;
			user.firstName = prompt('Введите имя:');
			user.lastName = prompt('Введите фамилию:');
			user.birthDay = prompt('Введите дату рождения');
			user.phones = []
			while (true){
				var phone = prompt('Введите номер телефона:(для выхода пустой номер)');
				if (!phone) break;
				user.phones.push(phone);	
			}
			users.push(user);
		}
		
		// for (var i=0; i<users.length; ++i){
		// 	console.log(' Имя: ' + users[i].firstName + ' Фамилия: ' + users[i].lastName + ' Дата рождения: ' + users[i].birthDay + ' Телефон: ' + users[i].phones.join(','));
		// }
		function csvFormat(users){
			return users.map(function(user){
				return Object.keys(user).map(function(key){
					if(typeof user[key] == 'string' || typeof user[key] == 'number') return '"' + user[key] + '"';
					else return '"' + user[key].map(function(phone){
							return '"' + phone + '"'; 
						}).join(';');
					}).join(';');
				}).join('\r\n');
		}
		
	</script>
</body>
</html>